syntax = "proto3";

package br.com.ntopus.accesscontrol.proto;

option java_outer_classname = "AccessControlServer";

service AccessControlService {
    rpc AddVertex (AddVertexRequest) returns (VertexResponse) {}
    rpc GetVertexById (GetVertexByIdRequest) returns (VertexResponse) {}
    rpc GetVertexByCode (GetVertexByCodeRequest) returns (VertexResponse) {}
    rpc DeleteVertex (DeleteVertexRequest) returns (VertexResponse) {}
    rpc UpdateVertexProperty (UpdateVertexPropertyRequest) returns (VertexResponse) {}
    rpc AddEdge (AddEdgeRequest) returns (EdgeResponse) {}
    rpc GetEdge (GetEdgeRequest) returns (EdgeResponse) {}
}

message Vertex {
    string label = 1;
    repeated Property property = 2;
}

message Property {
    string name = 1;
    string value = 2;
}

message AddVertexRequest {
    Vertex vertex = 1;
}

message GetVertexByCodeRequest {
    string label = 1;
    string code = 2;
}

message GetVertexByIdRequest {
    int64 id = 1;
}
message VertexResponse {
    string status = 1;
    Vertex data = 2;
    string message = 3;
}

message Failure {
    string cause = 1;
}

message DeleteVertexRequest {
    int64 id = 1;
    string label = 2;
}

message UpdateVertexPropertyRequest {
    int64 id = 1;
    string label = 2;
    repeated Property property = 3;
}

message VertexInfo {
    int64 id = 1;
    string label = 2;
}

message Edge {
    VertexInfo source = 1;
    VertexInfo target = 2;
    string edgeLabel = 3;
    repeated Property property = 4;
}

message AddEdgeRequest {
    Edge edge = 1;
}

message EdgeResponse {
    string status = 1;
    Edge data = 2;
    string message = 3;
}

message GetEdgeRequest {
    int64 id = 1;
}